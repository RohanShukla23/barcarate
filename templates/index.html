<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarcaRate - Transfer Rating System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>âš½ BarcaRate</h1>
            <p>intelligent transfer rating system for fc barcelona</p>
        </header>

        <!-- squad analysis section -->
        <section class="squad-analysis">
            <h2>squad analysis</h2>
            <div class="analysis-grid">
                <div class="overview-card">
                    <h3>squad overview</h3>
                    <div class="stat-row">
                        <span>total players:</span>
                        <strong>{{ squad_analysis.squad_overview.total_players }}</strong>
                    </div>
                    <div class="stat-row">
                        <span>average age:</span>
                        <strong>{{ squad_analysis.squad_overview.average_age }}</strong>
                    </div>
                    <div class="position-breakdown">
                        {% for position, count in squad_analysis.squad_overview.position_breakdown.items() %}
                        <div class="position-stat">
                            <span>{{ position }}:</span>
                            <strong>{{ count }}</strong>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="priorities-card">
                    <h3>transfer priorities</h3>
                    {% if squad_analysis.priorities %}
                        {% for priority in squad_analysis.priorities %}
                        <div class="priority-item priority-{{ priority.urgency }}">
                            <div class="priority-header">
                                <strong>{{ priority.position }}</strong>
                                <span class="urgency-badge">{{ priority.urgency }}</span>
                            </div>
                            <p>{{ priority.reason }}</p>
                            <ul class="needs-list">
                                {% for need in priority.specific_needs %}
                                <li>{{ need }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p>squad well balanced - no urgent priorities</p>
                    {% endif %}
                </div>
            </div>
        </section>

        <!-- transfer rating section -->
        <section class="transfer-rating">
            <h2>rate a transfer</h2>
            <div class="rating-interface">
                <div class="player-search">
                    <label for="player-input">search la liga player:</label>
                    <input type="text" id="player-input" placeholder="start typing a player name..." autocomplete="off">
                    <div id="search-results" class="search-results"></div>
                </div>

                <div id="rating-result" class="rating-result" style="display: none;">
                    <!-- rating results will be inserted here -->
                </div>
            </div>
        </section>

        <!-- position analysis section -->
        <section class="position-details">
            <h2>position analysis</h2>
            <div class="position-grid">
                {% for position, analysis in squad_analysis.position_analysis.items() %}
                <div class="position-card">
                    <div class="position-header">
                        <h3>{{ position }}</h3>
                        <div class="strength-rating">
                            <span>strength: {{ analysis.strength_rating }}/10</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: {{ (analysis.strength_rating / 10 * 100) }}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="player-list">
                        {% for player in analysis.players %}
                        <div class="player-item">
                            <span class="player-name">{{ player.name }}</span>
                            <span class="player-details">{{ player.age }}y, {{ player.position }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <div class="needs-assessment">
                        <h4>assessment:</h4>
                        <ul>
                            {% for need in analysis.needs_assessment %}
                            <li>{{ need }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>

    <!-- loading overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>analyzing transfer...</p>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>